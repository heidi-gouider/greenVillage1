{% extends 'base.html.twig' %}

{% block title %}Green Village
{% endblock %}

{% block body %}
	<div class="contenu">
		<h1 class="text-center text-white">
			{{ libelle_categorie }}</h1>
		<!-- <a href="add_form.php" class="btn btn-primary float-end">Ajouter</a> -->
		<main class="container">
			<div class="row">
				<div class="col-10 mx-auto">
					<div class="d-flex flex-wrap justify-content-around">

						{% for produit in produits %}
							{# <div class="col-md-6 col-lg-5 mb-4"> #}
							<div class="card m-2" style="width: 18rem;">
								<img class="card-img-top mx-auto" src="{{ asset(produit.photo) }}" alt="{{ produit.libelleProduit }}">
								<div class="card-body">
									<h5 class="card-title">
										<a href="{{ path('app_detail_produit', {'id': produit.id}) }}"></a>
										{{ produit.libelleProduit }}</h5>
									<p class="content bg-body">
										{{ produit.descriptionProduit}}</p>
									<p class="content bg-body">
										{{ produit.prixAchatHt}}
										euros</p>
								</div>

								<div class="card-footer mt-2">
									{% if produit.quantiteStock == 0 %}
										<p class="text-danger">Stock épuisé !</p>
									</div>
								{% else %}
									<form action="{{ path('panier_ajout', {'id': produit.id}) }}" method="post">
										<div class="d-flex justify-content-center">

											{# ***les quantités***
																																																																																 Je décide de mettre les quantités dans le  panier #}

											{# <button class="btn btn-secondary bg-danger quantity-button" href="{{ path('panier_retirer', {id: produit.id }) }}"  data-produit-id="{{ produit.id }}" data-action="decrement">-</button>
																																																																															<input name="quantite" value="1" min="1" max="10" class="quantity-input col-2 text-center" data-disc-id="{{ disc.id }}" type="number"> #}

											{# ***bouton lien d'ajout au panier*** #}
											{# </button class="btn btn-secondary bg-success quantity-button" href="{{ path('panier_ajout', {id: produit.id }) }}" data-produit-id="{{ produit.id }}" data-action="increment">+</button>
																																																																																 </div>  #}

											{# vers panier #}
												<button type="submit" class=" d-block mt-5 btn btn-success mx-auto mb-3" href="{{ path('panier_ajout', {id: produit.id})}}"> ajouter au panier
												{# <i class="bi bi-basket"> #}
											</button>


											{# vers modal #}
											{# <button type="button" class=" d-block mt-5 btn btn-success mx-auto mb-3" data-bs-toggle="modal" data-bs-target="#modal{{ plat.id }}">Ajouter au panier</button>
																																																																																</button> #}
										</div>
										{# {% if loop.index is even %}
																																								<div class="row">
																																								{% endif %} #}
									</div>

								</form>
							{% endif %}
							{# </div> #}
						{# </div> #}

							{# Si vous avez affiché 2 cartes, fermez la rangée actuelle et commencez une nouvelle rangée #}
							{# {# {% if loop.index is even %}
																													{% if loop.index0 % 2 == 1 or loop.last %}
																					                    </div>
																					                {% endif %}																					<div class="row"> {% endif %} #}
						</div>
						#}
					{% endfor %}
					{# </div> #}
				<!-- /// LA MODAL D'AJOUT AU PANIER/// -->
					{# <div class="modal fade" id="modal{{ plat.id }}" tabindex="-1"> #}

				</main>
				<li class="nav-item text-orange">
					<a class="nav-link text-center" href="{{ path('app_categorie') }}">Retour au catalogue</a>
				</li>

			</div>
			{# {% include "partials/footer.php" %} #}
		{% endblock %}
