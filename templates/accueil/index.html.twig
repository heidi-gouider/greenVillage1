{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}
	{# Banniere categories #}
	<div class="row align-items-center bg-dark banniere mx-auto">
		{% for  categorie in categories %}
			{# afficher uniquement les categories parent #}
			{% if categorie.parentCategorie is null %}
				<div class="col d-flex justify-content-center">
					<a href="{{ path('app_sous_categorie', {'parent_categorie_id': categorie.id}) }}" class="text-white font-weight-bold">
						{{ categorie.libelleCategorie}}
					</a>
				</div>
			{% endif %}
		{% endfor %}
	</div>

	<div class="contenu_accueil">

		<h1 class="text-center mt-5">Village Green</h2>

		{# Barre de recherche #}
		<form class="form-inline my-2 my-lg-0 text-center">
			<input
			class="form-control-sm mr-sm-2" type="search" placeholder="recherche" aria-label="Search">
			{# value="{{ searchTerm }} #}
			<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Recherche</button>
		</form>


		{# Caroussel des produits far #}
		<div class="container mt-5>
					<div id=" carousel" class=" carousel slide" data-bs-ride=" carousel">
			<div class="carousel-inner">
				{# {% set produitsAleatoires = produits|shuffle %} #}

				<!-- Première diapositive active avec 3 images -->
					<div class="carousel-item active mx-auto" data-bs-interval="3600"> <div class="row">
						{% for produit in produitsAleatoires|slice(0, 3) %}
							<div class="col-4 d-flex justify-content-center">
								<div class="card m-2" style="width: 10rem;">
									<img class="card-img-top zoom-img" src="{{ produit.photo }}" alt="">
									<div class="card-body">
										<h5 class="card-title">{{ produit.libelleProduit }}</h5>
									</div>
								</div>
							</div>
						{% endfor %}
					</div>
				</div>

				<!-- Deuxième diapositive avec 3 images -->
				<div class="carousel-item" data-bs-interval="3600">
					<div
						class="row">
						{% for produit in produitsAleatoires|slice(3, 3) %}
							<div class="col-4 d-flex justify-content-center">
								<div
									class="card m-2" style="width: 10rem;">
									<img class="card-img-top zoom-img" src="{{ produit.photo }}" alt="">

									<div class="card-body">
										<h5 class="card-title">{{ produit.libelleProduit }}</h5>
									</div>
								</div>
							</div>
						{% endfor %}
					</div>
				</div>

				<!-- Troisième diapositive avec 3 images -->
				<!-- Contrôles précédent et suivant -->
					<button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev"> <span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="visually-hidden">Previous</span>
				</button>
				<button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="visually-hidden">Next</span>
				</button>
			</div>
		</div>


		{# Barre de recherche #}

		{# <ul>
			{% for produit in produits %}
				<li>{{ produit.libelleProduit }}
				</li>
			{% else %}
				<li>Aucun produit trouvé.</li>
			{% endfor %}
		</ul>
		<form class="form-inline my-2 my-lg-0 text-center">
			{{ form_start(form, {'attr': {'class': 'form-inline my-2 my-lg-0 text-center'}}) }}
			{{ form_widget(form.query) }}
			{{ form_widget(form.recherche) }}
			{{ form_end(form) }}
		</form>
		{{ form_start(form) }}
		{{ form_row(form.categorie) }}
		{{ form_row(form.query) }}
		<button type="submit">Rechercher</button>
		{{ form_end(form) }}

		<h2>Résultats</h2>
		{% if produits is not empty %}
			<ul>
				{% for produit in produits %}
					<li>{{ produit.libelleProduit }}</li>
				{% endfor %}
			</ul>
		{% else %}
			<p>Aucun produit trouvé.</p>
		</div> #}
		{# <div class="mt-5"> #}

			{# Affichage des top ventes #}
				<h2 class="text-center"> Nos catégories</h2>
							<div class="row">
				<div class="d-flex flex-wrap justify-content-around">
					{% for  categorie in categories %}
						{# ici je vais mettre une condition pour afficher uniquement les categories parent #}
						{% if categorie.parentCategorie is null %}
							<div class="col-md-4 mb-5">
								<div class="card w-50" id="images">
									{# Lien vers les sous-catégories  nom de la route,
																je passe l'id de la categorie parent à la route #}
									<a href="{{ path('app_sous_categorie', {'parent_categorie_id': categorie.id}) }}">
										<img class="card-img-top mx-auto" src="{{ asset(categorie.imageCategorie ?? 'default-image.jpg') }}" alt="{{ categorie.imageCategorie }}"> <div class="card-body">
											<h5 class="card-title mt-5">{{ categorie.libelleCategorie }}</h5>
										</a>
										<p class="card-text">
											{# {{ categorie.descriptionCategorie}}</p> #}
									</div>
								</div>
							</div>
							{# {% if loop.index is even %}
							</div>
							<div class="row">
							{% endif %} #}
						{% endif %}
					{% endfor %}
				</div>
			</div>

			{# <div class="d-flex flex-wrap justify-content-around">
																																																										{% for produit in topProduits %}
																																																											<div class="card m-2" style="width: 15rem;">
																																																												<img class="card-img-top zoom-img" src="{{ asset('img/' ~ produit.photoProduit) }}" alt="">
																																																												<div class="card-body">
																																																													<h5
																																																														class="card-title">
																																																														{{ produit.libelle_categorie }}</h5>
																																																												</div>																																															</div>
																																																										{% endfor %} #}
			<div class="col-md-6 mx-auto">
				{# <div class="nav-item">
					<a class="nav-link text-center text-orange" href="{{ path('app_categorie') }}">Notre Catalogue</a>
				</div> #}
				{# <img class="card-img-top mx-auto w-50 img-centered" src="{{ asset('IMG/les_violons.webp') }}" alt="{{ "violons" }}">  #}

				<div class="nav-item">
					<a class="nav-link text-center text-orange" href="{{ path('app_produit') }}">Tous nos  instruments</a>
				</div>
			</div>
			{# <div class="text-center">
																																																									<a href="{{ path('app_easter') }}">  <img  src="{{ asset('img/tape.webp') }}" alt="k7"></a> #}
		</div>
	</div>

	{# {% include "partials/socialIcons.php" %} #}

	{# {% include "partials/footer.html.twig" %} #}
{% endblock %}
