{# {% extends 'base.html.twig' %} #}

{# {% block title %}Con Administrateur{% endblock %} #}

{% block head %}
    <style>
        /* Styles pour la fenêtre modale */
        .modal {
            display: none; /* Masquer la modale par défaut */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4); /* Fond semi-transparent */
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 50%; /* Ajuster la largeur de la modale */
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
{% endblock %}

{% block body %}
    {# <div class="contenu">
        <div class="container">
            <div class="row text-center">
                <div class="col-4 mx-auto">
                    <a href="#" id="openModalButton" class="btn btn-primary"> connexion</a>
                </div>
            </div>
        </div>
    </div> #}
{% set last_username = last_username ?? '' %}
{% set error = error ?? null %}

    <!-- Fenêtre modale de connexion -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModalButton">&times;</span>
            <h1>Connexion Administrateur</h1>

            <form id="adminLoginForm" method="post" action="{{ path('admin_login') }}">
                {% if error %}
                    <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
                {% endif %}

                <label class="mb-3" for="inputUsername">Nom d'utilisateur</label>
                <input type="text" id="inputUsername" name="username" class="form-control" required autofocus value="{{ last_username }}">

                <label for="inputPassword" class="mt-4 mb-3">Mot de passe</label>
                <input type="password" id="inputPassword" name="password" class="form-control" required>

                <button type="submit" class="btn btn-primary mt-3">Se connecter</button>
            </form> 
 
            					{# <form class="admin" method="post" action="{{ path('admin_login') }}">
						<h1 class="h3 mb-5 font-weight-normal">Connexion Administrateur</h1>

						{% if error %}
							<div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
						{% endif %}

						<label class="mb-3" for="inputUsername">Nom d'utilisateur</label>
						<input type="text" id="inputUsername" name="username" class="form-control" required autofocus>

						<label class="mb-3 mt-3" for="inputPassword">Mot de passe</label>
						<input type="password" id="inputPassword" name="password" class="form-control" required>

						{# <button type="submit" class="btn btn-primary">Se connecter</button> #}
                        <div class="row ">
						<div class="d-grid gap-3 col-4 mx-auto mb-3">
							<button class="submit" type="submit">
								Connexion
							</button>
						</div>
					</div>

					</form> #}
				</div>

        </div>
    </div>

{% endblock %}

{% block javascripts %}
    <script>
        // Récupérer les éléments de la modale et des boutons
        var modal = document.getElementById("myModal");
        var openModalButton = document.getElementById("openModalButton");
        var closeModalButton = document.getElementById("closeModalButton");

        // Lorsque l'utilisateur clique sur le lien "Connexion Admin", ouvrir la modale
        openModalButton.addEventListener("click", function(event) {
            event.preventDefault();  // Empêche la redirection
            modal.style.display = "block";  // Ouvre la modale
        });

        // Lorsque l'utilisateur clique sur le bouton de fermeture (×), fermer la modale
        closeModalButton.onclick = function() {
            modal.style.display = "none";
        }

        // Lorsque l'utilisateur clique en dehors de la modale, fermer la modale
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
{% endblock %}
